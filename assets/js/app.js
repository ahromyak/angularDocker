
var cjs=angular.module('myApp',['ui.router']);cjs.controller('mainController',["$scope",function($scope){}]);cjs.config(["$stateProvider","$urlRouterProvider","$locationProvider",function($stateProvider,$urlRouterProvider,$locationProvider){$urlRouterProvider.otherwise("/home");var homeState={name:'home',url:'/home',controller:'homeController',templateUrl:'app/components/home/html/home.html'};$stateProvider.state(homeState);}]);cjs.factory('gapiFactory',["$q",function($q){var request;function _loadEmails(){var deferred=$q.defer();gapi.client.load('gmail','v1',function(){request=gapi.client.gmail.users.threads.list({'userId':'me'});request.execute(function(resp){deferred.resolve(resp.threads);console.log(resp.threads);});});return deferred.promise;}
function _signIn(signInCallback){gapi.signin.render('signInButton',{'callback':signInCallback,'clientid':'162151956695-3voa7h9ij4e2mqasv69g6sp6uouqsc29.apps.googleusercontent.com','requestvisibleactions':'http://schemas.google.com/AddActivity','scope':'https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/gmail.readonly','cookiepolicy':'single_host_origin'});};return{signIn:_signIn,loadEmails:_loadEmails}}]);cjs.controller('homeController',["$scope","$timeout","gapiFactory",function($scope,$timeout,gapiFactory){$scope.signedIn=false;$scope.processAuth=function(authResult){if(authResult['access_token']){$scope.signedIn=true;}else if(authResult['error']){$scope.signedIn=false;}};$scope.signInCallback=function(authResult){var promiseEmails;$scope.$apply(function(){$scope.processAuth(authResult);});promiseEmails=gapiFactory.loadEmails();promiseEmails.then(function(data){$scope.mailList=data;});};$scope.renderSignInButton=function(){gapiFactory.signIn($scope.signInCallback);};$scope.start=function(){$scope.renderSignInButton();};$scope.signOut=function(){gapi.auth.signOut();};$timeout(function(){$scope.start();},1000);$scope.modalShown=false;$scope.toggleModal=function(itemData){$scope.itemData=itemData;$scope.modalShown=!$scope.modalShown;};}]);cjs.directive('modalDialog',function(){return{restrict:'E',scope:{show:'=',itemData:'='},replace:true,link:function(scope,element,attrs){scope.dialogStyle={};if(attrs.width)
scope.dialogStyle.width=attrs.width;if(attrs.height)
scope.dialogStyle.height=attrs.height;scope.hideModal=function(){scope.show=false;};},templateUrl:'app/components/home/html/modal.html'};});