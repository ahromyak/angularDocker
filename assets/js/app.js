
var cjs=angular.module('myApp',['ui.router']);cjs.controller('mainController',["$scope",function($scope){}]);cjs.config(["$stateProvider","$urlRouterProvider","$locationProvider",function($stateProvider,$urlRouterProvider,$locationProvider){$urlRouterProvider.otherwise("/home");var homeState={name:'home',url:'/home',controller:'homeController',templateUrl:'app/components/home/html/home.html'};$stateProvider.state(homeState);}]);cjs.controller('homeController',["$scope","$timeout",function($scope,$timeout){$scope.signedIn=false;function listThreads(userId,callback){var request=gapi.client.gmail.users.threads.list({'userId':userId});request.execute(callback);};$scope.processAuth=function(authResult){if(authResult['access_token']){$scope.signedIn=true;}else if(authResult['error']){$scope.signedIn=false;}};$scope.signInCallback=function(authResult){$scope.$apply(function(){$scope.processAuth(authResult);});gapi.client.load('gmail','v1',function(){listThreads('me',function(resp){$scope.$apply(function(){$scope.mailList=resp.threads;});});});};$scope.renderSignInButton=function(){gapi.signin.render('signInButton',{'callback':$scope.signInCallback,'clientid':'162151956695-3voa7h9ij4e2mqasv69g6sp6uouqsc29.apps.googleusercontent.com','requestvisibleactions':'http://schemas.google.com/AddActivity','scope':'https://www.googleapis.com/auth/plus.login https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/gmail.readonly','cookiepolicy':'single_host_origin'});};$scope.start=function(){$scope.renderSignInButton();};$scope.signOut=function(){gapi.auth.signOut();};$timeout(function(){$scope.start();},1000);}]);